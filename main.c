#include <stdio.h>
#include "read-ir.h"

int main() {
  // NEC format
  //uint32_t remoData[] = {10187,5024,667,1808,651,1867,672,1840,667,592,667,592,667,1840,667,1840,672,1840,667,619,667,592,667,1840,651,1808,672,592,667,624,629,629,667,640,619,1840,667,1797,667,1840,667,597,667,624,667,592,667,592,667,1835,667,597,667,624,667,587,672,1835,672,1840,667,1840,672,1840,667,597,667,240677,10192,5024,667,1840,667,1867,672,1840,667,592,667,592,667,1840,667,1840,672,1840,667,619,667,592,667,1840,672,1840,672,592,672,619,629,629,667,592,667,1840,672,1840,667,1840,672,587,667,624,667,592,667,592,667,1840,667,592,667,624,667,587,672,1840,667,1840,667,1845,667,1845,667,592,667,256811,10192,5024,667,1840,693,1845,672,1840,667,592,667,592,667,1840,672,1840,672,1840,672,619,667,576,635,1840,672,1840,667,592,645,592,629,629,667,592,667,1840,667,1845,667,1840,672,592,667,624,629,581,667,592,667,1835,672,597,667,656,635,587,672,1835,672,1840,651,1813,667,1840,672,597,667,32000};
  // KADENKYO format
  uint32_t remoData[] = {3376,1669,432,400,432,1227,432,400,432,1227,437,389,437,1227,432,395,432,1227,437,400,432,1232,432,395,432,1227,437,1227,437,400,427,1227,432,384,400,1227,437,1227,432,1179,432,1227,437,389,475,363,432,395,432,1227,437,389,437,1227,432,400,432,395,432,1227,437,389,437,400,432,411,427,400,432,1227,437,1227,437,389,432,1227,432,400,432,400,437,389,437,1227,432,400,427,347,432,389,437,1227,416,368,427,1227,432,1232,432,69051,3387,1669,437,395,432,1227,437,400,448,1211,432,400,432,1227,432,400,437,1227,432,395,432,1232,432,400,432,1232,432,1227,432,389,437,1227,464,368,427,1227,432,1232,432,1227,432,1227,432,400,437,389,437,400,432,1227,432,400,432,1227,437,389,437,400,405,1200,432,400,432,389,437,411,437,400,432,1227,432,1259,405,400,432,1232,432,395,432,395,432,400,432,1227,432,400,437,389,432,400,427,1232,432,400,437,1227,432,1227,432,320000};
  // SONY normal press
  //uint32_t remoData[] = {2379,523,1195,560,608,555,1157,571,597,571,1200,571,608,560,608,565,603,571,1195,592,603,565,1200,565,1195,571,1200,571,608,560,608,581,1184,571,603,560,560,565,1200,560,629,13083,2389,571,1200,565,560,555,1200,565,592,533,1195,571,603,565,608,560,608,571,1200,592,608,560,1200,571,1200,565,1200,565,603,565,608,571,1195,565,619,555,608,560,1189,528,629,13077,2389,571,1200,581,587,565,1200,560,555,571,1195,571,608,565,603,565,603,571,1227,565,603,565,1200,565,1200,565,1195,571,608,565,603,565,1200,533,587,571,603,565,1200,587,603,320000};
  // SONY long press
  // uint32_t remoData[] = {2379,565,1200,571,603,565,1200,565,603,565,1200,565,603,571,603,565,608,560,1200,587,608,571,1195,571,1195,571,1195,565,613,565,603,565,1200,565,603,565,587,539,1195,571,613,13051,2389,512,1205,560,608,544,1173,560,608,571,1200,571,608,560,608,565,603,565,1200,592,603,565,1200,565,1195,571,1200,571,608,560,608,571,1195,560,608,549,576,565,1200,560,635,13072,2389,571,1200,565,555,571,1195,565,587,539,1200,565,603,565,608,571,603,571,1227,560,608,560,1205,560,1200,565,1200,565,603,565,608,571,1195,571,608,560,608,560,1184,555,608,13093,2389,565,1205,565,603,565,1200,539,581,571,1195,571,555,565,603,565,603,571,1227,565,603,565,1200,565,1200,565,1195,571,608,565,603,565,1200,565,603,571,603,565,1200,587,603,13088,2395,565,1200,560,608,571,1200,571,608,560,1157,555,608,560,608,571,608,565,1200,587,608,565,1200,560,1205,560,1200,565,608,571,608,560,1200,571,608,560,608,571,1195,571,629,13088,2395,565,1200,565,603,565,1200,565,603,571,1195,571,603,565,571,549,608,571,1248,544,608,560,1200,512,1200,565,1200,565,603,565,603,571,1195,565,613,565,608,560,1200,565,629,13088,2395,565,1200,571,608,565,1200,560,608,565,1200,560,608,528,597,565,603,565,1200,587,603,571,1195,571,1195,571,1200,571,608,560,608,565,1200,560,608,565,613,565,1195,571,629,13088,2395,565,1200,571,603,571,1200,565,608,560,1200,565,608,560,608,571,608,581,1184,587,608,539,1179,560,1184,533,1200,565,603,571,608,560,1200,565,608,560,608,571,1200,571,629,13088,2395,565,1200,565,603,571,1195,565,613,565,1195,571,603,565,603,565,608,571,1195,592,608,560,1200,565,1200,565,1200,560,608,565,603,571,1195,565,613,565,603,565,1200,565,635,13120,2357,565,1200,571,608,560,1205,560,608,571,1200,560,608,571,608,565,603,565,1200,587,603,571,1195,517,1195,571,1157,555,608,560,608,560,1205,560,608,571,608,565,1195,571,629,320000};



  uint8_t buff[64];
  initRemo(buff, sizeof(buff));
  uint8_t signal = 1;
  int8_t ret = 100;
  for (int i=0; i<(int)(sizeof(remoData)/sizeof(remoData[0])); i++) {
    ret = parseRemo(remoData[i], signal);
    if (ret != 0)
      break;
    signal = !signal;
  }
  printf("ret=%d\n", ret);
  outRemo();

  for (int i=0; i<(int)sizeof(buff); i++) {
    if (i % 16 == 0) {
      printf("%02x:", i);
    }
    if (i % 16 == 8) {
      printf(" ");
    }
    printf(" %02x", buff[i]);
    if (i % 16 == 15)
      printf("\n");
  }
}
